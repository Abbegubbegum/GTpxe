interface=end0
# Use bind-dynamic instead of bind-interfaces to allow dnsmasq to start
# even when the interface is not available (e.g., no ethernet cable plugged in)
# This will automatically bind to the interface when it becomes available
bind-dynamic

# Don't read /etc/resolv.conf or manage it
no-resolv
no-poll

dhcp-range=192.168.200.50,192.168.200.200,1h
dhcp-option=3,192.168.200.1         # Gateway
dhcp-option=6,192.168.200.1         # DNS

enable-tftp
tftp-root=/srv/tftp

# Architecture-specific boot files
# BIOS/Legacy (architecture 0) - older computers
dhcp-match=set:bios,option:client-arch,0
dhcp-boot=tag:bios,boot.kpxe

# UEFI x86_64 (architecture 7 and 9) - newer computers
dhcp-match=set:efi-x64,option:client-arch,7
dhcp-match=set:efi-x64-http,option:client-arch,9
dhcp-boot=tag:efi-x64,snponly.efi
dhcp-boot=tag:efi-x64-http,snponly.efi

# PXE menu service (for legacy BIOS)
pxe-service=x86PC, "Alpine PXE Diagnostic", boot.kpxe
# UEFI PXE service
pxe-service=X86-64_EFI, "Alpine PXE Diagnostic", snponly.efi

dhcp-host=pxe-server,192.168.200.1
